language: node_js

node_js: 10

env:
  global:
    - SEQ_DB=sequelizr_test
    - SEQ_USER=sequelizr_test
    - SEQ_PW=sequelizr_test
    - SEQ_HOST=127.0.0.1
    - MYSQLDB_ENTRYPOINT=$TRAVIS_BUILD_DIR/scripts/mysql
    - SEQ_MYSQL_PORT=8980
    - DIALECT=mysql

jobs:
  include:
    - stage: test üë©üèΩ‚Äçüíª
      sudo: required
      before_script:
        - docker-compose up -d mysql-80;
        - docker run --link mysql-80:db -e CHECK_PORT=3306 -e CHECK_HOST=db --net sequelizr_default giorgos/takis;
      script: npm run test

    - stage: lint ‚ú®
      script: npm run lint

cache: npm

sudo: true

git:
  depth: 3
